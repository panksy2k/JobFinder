language: java
jdk:
  - openjdk11
branches:
  only:
    - master
build:
  ci:
    - mvn clean package docker:build
  on_success:

  post_ci:
    - if [ "$BRANCH" == "master" ]; then docker image tag jobfinder panksy2k/jobfinder:latest && docker image push panksy2k/jobfinder:latest; fi

integrations:
  hub:
    - integrationName: jobfinder-docker-registry
      type: dockerRegistryLogin
      branches:
        only:
          - master